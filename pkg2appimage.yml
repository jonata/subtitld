app: org.jonata.Subtitld
ingredients:
  dist: focal
  sources:
    - deb http://us.archive.ubuntu.com/ubuntu/ focal focal-updates focal-security main universe
    - deb http://us.archive.ubuntu.com/ubuntu/ focal-updates main universe
    - deb http://us.archive.ubuntu.com/ubuntu/ focal-security main universe
  packages:
    - python3-virtualenv
  # script:
  #   -  wget -c https://raw.githubusercontent.com/mu-editor/mu/master/conf/mu.codewith.editor.png
  #   -  wget -c https://raw.githubusercontent.com/mu-editor/mu/master/conf/mu.appdata.xml
script:
  # - cp subtitld/graphics/subtitld.png ./usr/share/icons/hicolor/512x512/
  # - cp subtitld/graphics/subtitld.png .
  # - mkdir -p usr/share/metainfo/ ; cp ../mu.appdata.xml usr/share/metainfo/
  - virtualenv --python=python3 usr
  - ./usr/bin/pip3 install subtitld
  - cat > usr/share/applications/org.jonata.Subtitld.desktop <<\EOF
  - [Desktop Entry]
  - Type=Application
  - Name=Subtitld
  - Comment=Subtitld
  - Icon=org.jonata.Subtitld
  - Exec=python3 bin/subtitld %F
  - Terminal=false
  - Categories=Application;Multimedia;
  - Keywords=Subtitles;
  - StartupWMClass=subtitld
  - MimeType=text/x-python3;text/x-python3;
  - EOF
  - cp usr/share/applications/org.jonata.Subtitld.desktop .
  - usr/bin/pip3 freeze | grep "subtitld" | cut -d "=" -f 3 >> ../VERSION